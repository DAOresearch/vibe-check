# README Problems & Gaps

**Purpose**: Critical analysis of the current README.md to identify issues that prevent it from serving as an effective design specification for vibe-check's developer experience.

**Context**: Following documentation-driven development (DDD), the README must clearly articulate the intended DX before implementation begins. This document catalogs all problems preventing that clarity.

---

## Problems Identified

### Problem #1: Missing Prompt Builder API (Atomic Prompt Units) ✅ RESOLVED

**Issue**: README doesn't document a `prompt()` builder function that treats command + prompt text + attachments as a single atomic unit. The intended API `prompt(text, {command, attachments})` that returns an async iterator is missing. This atomic unit concept—where slash command, prompt, and attachments are bundled together—is fundamental to matrix testing but not explained.

**Impact**:
- Developers won't understand that prompts are designed as testable, atomic units
- The relationship between commands, prompts, and attachments is unclear
- Cannot effectively matrix test prompts as single dimensions
- Core DX principle (composition of command+prompt+attachments) is hidden

**Related Sections**: API Reference, Usage Examples, Testing, Matrix Testing

**Reference**: Async iterator pattern aligns with Claude's streaming API - https://docs.claude.com/en/api/agent-sdk/streaming-vs-single-mode

**Category**: Completeness, DX Design

**Resolution**: Added comprehensive "Prompt Builder API" section to README (lines 84-204) with:
- Clear API signature: `prompt(text, { command?, attachments? })`
- Progressive examples (simple → attachments → commands)
- Reusability patterns (store as const, compose, factory functions)
- Matrix testing preview
- Link to Claude's streaming API docs

---

### Problem #2: No Agent Builder/Extension Pattern

**Issue**: README doesn't show how to extend agents with custom slash commands and custom agent definitions. There's no documented builder pattern for agents that accepts customization.

**Impact**:
- Extensibility story is completely unclear
- Developers won't know how to customize agents for their specific workflows
- Custom command integration is undocumented
- Limits perceived flexibility of the tool

**Related Sections**: Agent Configuration, Customization, API Reference, Advanced Usage

**Category**: Completeness, DX Design

---

### Problem #3: Unclear Project/Source Workflow & Worktree Management

**Issue**: README doesn't explain the standardized workflow for how agents interact with different project sources (git repos, local files, or no source) and how worktrees are automatically managed. Key missing details:
- Git source: branch + optional commit handling
- Standard execution model regardless of source type
- Automatic worktree creation for each rollout (even single rollouts)
- Local file → temp repo + worktrees conversion
- No source → temp repo + worktrees creation
- All automatic with sensible defaults but overridable

**Impact**:
- Developers won't understand the isolation model
- The automatic worktree creation magic isn't visible
- Override capabilities are hidden
- Project initialization workflow is ambiguous
- Can't leverage the powerful isolation features effectively

**Related Sections**: Project Configuration, Workflow, Architecture, Getting Started

**Category**: Completeness, Clarity, DX Design

---

### Problem #4: Matrix Testing Not Presented as Simple & Accessible

**Issue**: README doesn't present matrix testing with appropriate simplicity. As a main feature, it should show that providing an array creates a test dimension—that's it. No complex setup required. Current docs may over-complicate or under-explain this core feature.

**Impact**:
- Main feature isn't immediately accessible
- Developers face unnecessary friction setting up matrix tests
- Readability and simplicity (core DX goals) are compromised
- Feature appears more complex than it actually is

**Related Sections**: Testing, Matrix Testing, Quick Start, Examples

**Category**: DX Design, Clarity, Structure

---

## Problem Categories

- **Clarity**: Unclear or ambiguous descriptions
- **Completeness**: Missing critical information
- **Consistency**: Contradictions or misalignments
- **DX Design**: Fails to communicate intended developer experience
- **Structure**: Organization issues that harm comprehension
- **Accuracy**: Technical incorrectness or outdated information

---

## Notes

- This document focuses on problems, not solutions
- Each problem should be specific and actionable
- Problems are documented in order of discovery
- Status tracking happens in implementation phase
